(()=>{"use strict";const e=(e,t,r)=>{let n;return function(...i){const o=this,s=r&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,r||e.apply(o,i)}),t),s&&e.apply(o,i)}},t={activeElement:null,args:null,lang:null,currentIndex:null,isInited:!1,numImages:0,init:r=>{(r=r||{}).selector=r.disableKeyPressListener||"[data-robroy]",r.bodyClass=r.bodyClass||"robroy-open",r.id=r.id||"robroy",r.disableKeyPressListener=r.disableKeyPressListener||!1,r.disableResizeListener=r.disableResizeListener||!1,r.resizeDebounceMilliseconds=r.resizeDebounceMilliseconds||100,r.minScreenWidth=r.minScreenWidth||400,r.disableImageClickListener=r.disableImageClickListener||!1,r.imageClickListenerThreshold=r.imageClickListenerThreshold||.5,r.disableOverlayClickListener=r.disableOverlayClickListener||!1,r.hideCloseButton=r.hideCloseButton||!1,r.hideFullScreenButton=r.hideFullScreenButton||!1,r.hideNavButtons=r.hideNavButtons||!1,r.hideCaption=r.hideCaption||!1,r.hideOverlay=r.hideOverlay||!1,r.disableAltCaptions=r.disableAltCaptions||!1,r.imgLoadIntervalMilliseconds=r.imgLoadIntervalMilliseconds||250,r.animateInClass=r.animateInClass||"robroy-fade-in",r.animateOutClass=r.animateOutClass||"robroy-fade-out",r.enableLoop=r.enableLoop||!1,r.showNumber=r.showNumber||!1,t.args=r;const n=r.lang||{};n.closeImage=n.closeImage||"Close Image",n.fullScreen=n.fullScreen||"Full Screen",n.previousImage=n.previousImage||"Previous Image",n.nextImage=n.nextImage||"Next Image",n.xOfY=n.xOfY||"[current] / [total]",t.lang=n;const i=document.querySelectorAll(r.selector),o=i.length;let s;for(s=0;s<o;s+=1)i[s].addEventListener("click",t.onClickThumbnail),i[s].setAttribute("data-robroy-index",s),t.numImages+=1;t.isInited||t.numImages<=0||(r.disableKeyPressListener||document.addEventListener("keydown",(e=>{document.getElementById(t.args.id)&&("ArrowRight"===e.key?t.next():"ArrowLeft"===e.key?t.previous():"Escape"===e.key&&t.close())}),!1),r.disableResizeListener||(r.resizeDebounceMilliseconds?window.addEventListener("resize",e(t.onResize,r.resizeDebounceMilliseconds)):window.addEventListener("resize",t.onResize)),t.isInited=!0)},onClickThumbnail:e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(t.args.minScreenWidth&&window.innerWidth<=t.args.minScreenWidth)return;let r=e.target;for(;!r.getAttribute("data-robroy-href")&&!r.getAttribute("href");)r=r.parentNode;t.open(r),e.preventDefault()},onClickImage:e=>{const r=e.target.width,n=r*t.args.imageClickListenerThreshold;e.offsetX<=n?t.previous():e.offsetX>=r-n&&t.next()},onResize:()=>{const e=document.getElementById(t.args.id);if(!e)return;const r=e.querySelector(".robroy__img"),n=e.querySelector(".robroy__caption");t.setSize(r,n)},getAnimationDuration:e=>{let t=getComputedStyle(e).animationDuration;return t.includes("ms")?t=parseFloat(t.replace("ms","")):t.includes("s")&&(t=1e3*parseFloat(t.replace("s",""))),t},open:e=>{if(document.getElementById(t.args.id))return;t.activeElement=e,t.args.bodyClass&&document.body.classList.add(t.args.bodyClass);const r=document.createElement("dialog");r.setAttribute("class",`robroy ${t.args.animateInClass}`.trim()),r.setAttribute("id",t.args.id),document.body.appendChild(r);const n=document.createElement("figure");if(n.setAttribute("class","robroy__figure robroy__figure--loading"),r.appendChild(n),!t.args.hideFullScreenButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--full-screen"),e.setAttribute("title",t.lang.fullScreen),e.setAttribute("type","button"),e.addEventListener("click",t.fullScreen),e.innerText=t.lang.fullScreen,n.appendChild(e)}if(!t.args.hideCloseButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--close"),e.setAttribute("title",t.lang.closeImage),e.setAttribute("type","button"),e.addEventListener("click",t.close),e.innerText=t.lang.closeImage,n.appendChild(e)}if(!t.args.hideNavButtons){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--nav robroy__button--prev"),e.setAttribute("title",t.lang.previousImage),e.setAttribute("type","button"),e.addEventListener("click",t.previous),e.innerText=t.lang.previousImage,n.appendChild(e);const r=document.createElement("button");r.setAttribute("class","robroy__button robroy__button--nav robroy__button--next"),r.setAttribute("title",t.lang.nextImage),r.setAttribute("type","button"),r.innerText=t.lang.nextImage,r.addEventListener("click",t.next),n.appendChild(r)}const i=document.createElement("img");if(i.setAttribute("class","robroy__img"),t.args.disableImageClickListener||i.addEventListener("click",t.onClickImage),n.appendChild(i),!t.args.hideCaption){const e=document.createElement("figcaption");e.setAttribute("class","robroy__caption"),n.appendChild(e)}if(t.args.showNumber){const e=document.createElement("span");e.setAttribute("class","robroy__number"),r.appendChild(e)}if(!t.args.hideOverlay){const e=document.createElement("div");e.setAttribute("class","overlay robroy__overlay"),t.args.disableOverlayClickListener||e.addEventListener("click",t.close),r.appendChild(e)}if(t.setImage(e),r.showModal(),r.focus(),t.args.animateInClass){const e=t.getAnimationDuration(r);setTimeout((()=>{r.classList.remove(t.args.animateInClass)}),e+100)}},close:()=>{t.args.bodyClass&&document.body.classList.remove("robroy-open");const e=document.getElementById(t.args.id);if(t.args.animateOutClass){e.classList.add(t.args.animateOutClass);const r=t.getAnimationDuration(e);setTimeout((()=>{t.onClose(e)}),r+100)}else t.onClose(e)},onClose:e=>{e.remove(),t.activeElement.focus(),t.activeElement=null},next:()=>{let e=t.currentIndex+1;if(t.currentIndex>=t.numImages-1){if(!t.args.enableLoop)return;e=0}const r=document.querySelector(`[data-robroy-index="${e}"]`);t.setImage(r)},previous:()=>{let e=t.currentIndex-1;if(t.currentIndex<=0){if(!t.args.enableLoop)return;e=t.numImages-1}const r=document.querySelector(`[data-robroy-index="${e}"]`);t.setImage(r)},fullScreen:()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},getCaption:e=>{if(e.getAttribute("data-robroy-caption"))return e.getAttribute("data-robroy-caption");let r=e.querySelector("figcaption");if(r)return r.innerHTML;if(r=e.parentNode.querySelector("figcaption"),r)return r.innerHTML;if(!t.args.disableAltCaptions){const t=e.querySelector("img");if(t)return t.getAttribute("alt")}return""},setImage:e=>{const r=document.getElementById(t.args.id);if(r.classList.add("robroy--loading"),t.currentIndex=parseInt(e.getAttribute("data-robroy-index"),10),!t.args.hideNavButtons&&!t.args.enableLoop){const e=r.querySelector(".robroy__button--prev"),n=r.querySelector(".robroy__button--next");t.currentIndex<=0?e.style.display="none":e.style.display="",t.currentIndex>=t.numImages-1?n.style.display="none":n.style.display=""}if(t.args.showNumber){const n=r.querySelector(".robroy__number"),i=parseInt(e.getAttribute("data-robroy-index"),10)+1;n.innerText=t.lang.xOfY.replace("[current]",i).replace("[total]",t.numImages)}const n=r.querySelector(".robroy__img");let i=e.getAttribute("data-robroy-href");i||(i=e.getAttribute("href")),n.setAttribute("src",i);const o=e.getAttribute("data-robroy-height"),s=e.getAttribute("data-robroy-width");if(o&&s){const e=t.getSize(o,s);n.setAttribute("height",e.height),n.setAttribute("width",e.width)}const a=r.querySelector(".robroy__caption"),l=t.getCaption(e);l?(a.style.display="",a.innerHTML=l):(a.style.display="none",a.innerText="");const d=r.querySelector(".robroy__figure");if(n.complete)t.setSize(n,a),r.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading");else{let e=setInterval((()=>{n.complete&&(clearInterval(e),e=null,t.setSize(n,a),r.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading"))}),t.args.imgLoadIntervalMilliseconds)}},getSize:(e,r)=>{const n=t.getMargin(),i=window.innerHeight-n,o=window.innerWidth-n,s=r/e,a=e/r;return e>i&&(r=(e=i)*s),r>o&&(e=(r=o)*a),{height:e,width:r}},setSize:(e,r)=>{e.setAttribute("height",""),e.setAttribute("width",""),r.style.width="",r.style.height="";const n=t.getSize(e.clientHeight,e.clientWidth);if(e.setAttribute("height",n.height),e.setAttribute("width",n.width),r.style.width=`${n.width}px`,r.innerHTML){let i=r.offsetTop+r.clientHeight,{height:o,width:s}=n;const a=s/o,l=t.getMargin(),d=window.innerHeight-l,c=d/2;for(;i>d&&o>c;)o-=1,s=o*a,e.setAttribute("height",o),e.setAttribute("width",s),r.style.width=`${s}px`,i=r.offsetTop+r.clientHeight;r.style.height=i>d?`${c}px`:""}},getMargin:()=>Math.round(.1*window.innerHeight)},r=t,n=e=>{r.init(e)};window.robroy=n})();