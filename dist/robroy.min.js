var Robroy;(()=>{"use strict";var e=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};(()=>{e(t);const n=(e,t,n)=>{let r;return function(...i){const o=this,s=n&&!r;clearTimeout(r),r=setTimeout((()=>{r=null,n||e.apply(o,i)}),t),s&&e.apply(o,i)}},r={activeElement:null,args:null,lang:null,currentIndex:null,isInited:!1,numImages:0,init:e=>{(e=e||{}).selector=e.disableKeyPressListener||"[data-robroy]",e.bodyClass=e.bodyClass||"robroy-open",e.id=e.id||"robroy",e.disableKeyPressListener=e.disableKeyPressListener||!1,e.disableResizeListener=e.disableResizeListener||!1,e.resizeDebounceMilliseconds=e.resizeDebounceMilliseconds||100,e.minScreenWidth=e.minScreenWidth||400,e.disableImageClickListener=e.disableImageClickListener||!1,e.imageClickListenerThreshold=e.imageClickListenerThreshold||.5,e.disableOverlayClickListener=e.disableOverlayClickListener||!1,e.hideCloseButton=e.hideCloseButton||!1,e.hideFullScreenButton=e.hideFullScreenButton||!1,e.hideNavButtons=e.hideNavButtons||!1,e.hideCaption=e.hideCaption||!1,e.hideOverlay=e.hideOverlay||!1,e.disableAltCaptions=e.disableAltCaptions||!1,e.imgLoadIntervalMilliseconds=e.imgLoadIntervalMilliseconds||250,e.animateInClass=e.animateInClass||"robroy-fade-in",e.animateOutClass=e.animateOutClass||"robroy-fade-out",e.enableLoop=e.enableLoop||!1,r.args=e;const t=e.lang||{};t.closeImage=t.closeImage||"Close Image",t.fullScreen=t.fullScreen||"Full Screen",t.previousImage=t.previousImage||"Previous Image",t.nextImage=t.nextImage||"Next Image",r.lang=t;const i=document.querySelectorAll(e.selector),o=i.length;let s;for(s=0;s<o;s+=1)i[s].addEventListener("click",r.onClickThumbnail),i[s].setAttribute("data-robroy-index",s),r.numImages+=1;r.isInited||r.numImages<=0||(e.disableKeyPressListener||document.addEventListener("keydown",(e=>{document.getElementById(r.args.id)&&("ArrowRight"===e.key?r.next():"ArrowLeft"===e.key?r.previous():"Escape"===e.key&&r.close())}),!1),e.disableResizeListener||(e.resizeDebounceMilliseconds?window.addEventListener("resize",n(r.onResize,e.resizeDebounceMilliseconds)):window.addEventListener("resize",r.onResize)),r.isInited=!0)},onClickThumbnail:e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(r.args.minScreenWidth&&window.innerWidth<=r.args.minScreenWidth)return;let t=e.target;for(;!t.getAttribute("data-robroy-href")&&!t.getAttribute("href");)t=t.parentNode;r.open(t),e.preventDefault()},onClickImage:e=>{const t=e.target.width,n=t*r.args.imageClickListenerThreshold;e.offsetX<=n?r.previous():e.offsetX>=t-n&&r.next()},onResize:()=>{const e=document.getElementById(r.args.id);if(!e)return;const t=e.querySelector(".robroy__img"),n=e.querySelector(".robroy__caption");r.setSize(t,n)},getAnimationDuration:e=>{let t=getComputedStyle(e).animationDuration;return t.includes("ms")?t=parseFloat(t.replace("ms","")):t.includes("s")&&(t=1e3*parseFloat(t.replace("s",""))),t},open:e=>{if(document.getElementById(r.args.id))return;r.activeElement=e,r.args.bodyClass&&document.body.classList.add(r.args.bodyClass);const t=document.createElement("dialog");t.setAttribute("class",`robroy ${r.args.animateInClass}`.trim()),t.setAttribute("id",r.args.id),document.body.appendChild(t);const n=document.createElement("figure");if(n.setAttribute("class","robroy__figure robroy__figure--loading"),t.appendChild(n),!r.args.hideFullScreenButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--full-screen"),e.setAttribute("title",r.lang.fullScreen),e.setAttribute("type","button"),e.addEventListener("click",r.fullScreen),e.innerText=r.lang.fullScreen,n.appendChild(e)}if(!r.args.hideCloseButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--close"),e.setAttribute("title",r.lang.closeImage),e.setAttribute("type","button"),e.addEventListener("click",r.close),e.innerText=r.lang.closeImage,n.appendChild(e)}if(!r.args.hideNavButtons){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--nav robroy__button--prev"),e.setAttribute("title",r.lang.previousImage),e.setAttribute("type","button"),e.addEventListener("click",r.previous),e.innerText=r.lang.previousImage,n.appendChild(e);const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--nav robroy__button--next"),t.setAttribute("title",r.lang.nextImage),t.setAttribute("type","button"),t.innerText=r.lang.nextImage,t.addEventListener("click",r.next),n.appendChild(t)}const i=document.createElement("img");if(i.setAttribute("class","robroy__img"),r.args.disableImageClickListener||i.addEventListener("click",r.onClickImage),n.appendChild(i),!r.args.hideCaption){const e=document.createElement("figcaption");e.setAttribute("class","robroy__caption"),n.appendChild(e)}if(!r.args.hideOverlay){const e=document.createElement("div");e.setAttribute("class","overlay robroy__overlay"),r.args.disableOverlayClickListener||e.addEventListener("click",r.close),t.appendChild(e)}if(r.setImage(e),t.showModal(),t.focus(),r.args.animateInClass){const e=r.getAnimationDuration(t);setTimeout((()=>{t.classList.remove(r.args.animateInClass)}),e+100)}},close:()=>{r.args.bodyClass&&document.body.classList.remove("robroy-open");const e=document.getElementById(r.args.id);if(r.args.animateOutClass){e.classList.add(r.args.animateOutClass);const t=r.getAnimationDuration(e);setTimeout((()=>{r.onClose(e)}),t+100)}else r.onClose(e)},onClose:e=>{e.remove(),r.activeElement.focus(),r.activeElement=null},next:()=>{let e=r.currentIndex+1;if(r.currentIndex>=r.numImages-1){if(!r.args.enableLoop)return;e=0}const t=document.querySelector(`[data-robroy-index="${e}"]`);r.setImage(t)},previous:()=>{let e=r.currentIndex-1;if(r.currentIndex<=0){if(!r.args.enableLoop)return;e=r.numImages-1}const t=document.querySelector(`[data-robroy-index="${e}"]`);r.setImage(t)},fullScreen:()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},getCaption:e=>{if(e.getAttribute("data-robroy-caption"))return e.getAttribute("data-robroy-caption");let t=e.querySelector("figcaption");if(t)return t.innerHTML;if(t=e.parentNode.querySelector("figcaption"),t)return t.innerHTML;if(!r.args.disableAltCaptions){const t=e.querySelector("img");if(t)return t.getAttribute("alt")}return""},setImage:e=>{const t=document.getElementById(r.args.id);if(t.classList.add("robroy--loading"),r.currentIndex=parseInt(e.getAttribute("data-robroy-index"),10),!r.args.hideNavButtons&&!r.args.enableLoop){const e=t.querySelector(".robroy__button--prev"),n=t.querySelector(".robroy__button--next");r.currentIndex<=0?e.style.display="none":e.style.display="",r.currentIndex>=r.numImages-1?n.style.display="none":n.style.display=""}const n=t.querySelector(".robroy__img");let i=e.getAttribute("data-robroy-href");i||(i=e.getAttribute("href")),n.setAttribute("src",i);const o=e.getAttribute("data-robroy-height"),s=e.getAttribute("data-robroy-width");if(o&&s){const e=r.getSize(o,s);n.setAttribute("height",e.height),n.setAttribute("width",e.width)}const a=t.querySelector(".robroy__caption"),l=r.getCaption(e);l?(a.style.display="",a.innerHTML=l):(a.style.display="none",a.innerText="");const d=t.querySelector(".robroy__figure");if(n.complete)r.setSize(n,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading");else{let e=setInterval((()=>{n.complete&&(clearInterval(e),e=null,r.setSize(n,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading"))}),r.args.imgLoadIntervalMilliseconds)}},getSize:(e,t)=>{const n=r.getMargin(),i=window.innerHeight-n,o=window.innerWidth-n,s=t/e,a=e/t;return e>i&&(t=(e=i)*s),t>o&&(e=(t=o)*a),{height:e,width:t}},setSize:(e,t)=>{e.setAttribute("height",""),e.setAttribute("width",""),t.style.width="",t.style.height="";const n=r.getSize(e.clientHeight,e.clientWidth);if(e.setAttribute("height",n.height),e.setAttribute("width",n.width),t.style.width=`${n.width}px`,t.innerHTML){let i=t.offsetTop+t.clientHeight,{height:o,width:s}=n;const a=s/o,l=r.getMargin(),d=window.innerHeight-l,c=d/2;for(;i>d&&o>c;)o-=1,s=o*a,e.setAttribute("height",o),e.setAttribute("width",s),t.style.width=`${s}px`,i=t.offsetTop+t.clientHeight;t.style.height=i>d?`${c}px`:""}},getMargin:()=>Math.round(.1*window.innerHeight)};window.robroy=e=>{r.init(e)}})(),Robroy=t})();