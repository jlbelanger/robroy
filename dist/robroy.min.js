var Robroy;(()=>{"use strict";var e=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};(()=>{e(t);const r=(e,t,r)=>{let n;return function(...i){const o=this,s=r&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,r||e.apply(o,i)}),t),s&&e.apply(o,i)}},n={activeElement:null,args:null,lang:null,currentIndex:null,isInited:!1,numImages:0,init:e=>{(e=e||{}).selector=e.disableKeyPressListener||"[data-robroy]",e.bodyClass=e.bodyClass||"robroy-open",e.id=e.id||"robroy",e.disableKeyPressListener=e.disableKeyPressListener||!1,e.disableResizeListener=e.disableResizeListener||!1,e.resizeDebounceMilliseconds=e.resizeDebounceMilliseconds||100,e.minScreenWidth=e.minScreenWidth||400,e.disableImageClickListener=e.disableImageClickListener||!1,e.imageClickListenerThreshold=e.imageClickListenerThreshold||.5,e.disableOverlayClickListener=e.disableOverlayClickListener||!1,e.hideCloseButton=e.hideCloseButton||!1,e.hideFullScreenButton=e.hideFullScreenButton||!1,e.hideNavButtons=e.hideNavButtons||!1,e.hideCaption=e.hideCaption||!1,e.hideOverlay=e.hideOverlay||!1,e.disableAltCaptions=e.disableAltCaptions||!1,e.imgLoadIntervalMilliseconds=e.imgLoadIntervalMilliseconds||250,e.animateInClass=e.animateInClass||"robroy-fade-in",e.animateOutClass=e.animateOutClass||"robroy-fade-out",e.enableLoop=e.enableLoop||!1,e.showNumber=e.showNumber||!1,n.args=e;const t=e.lang||{};t.closeImage=t.closeImage||"Close Image",t.fullScreen=t.fullScreen||"Full Screen",t.previousImage=t.previousImage||"Previous Image",t.nextImage=t.nextImage||"Next Image",t.xOfY=t.xOfY||"[current] / [total]",n.lang=t;const i=document.querySelectorAll(e.selector),o=i.length;let s;for(s=0;s<o;s+=1)i[s].addEventListener("click",n.onClickThumbnail),i[s].setAttribute("data-robroy-index",s),n.numImages+=1;n.isInited||n.numImages<=0||(e.disableKeyPressListener||document.addEventListener("keydown",(e=>{document.getElementById(n.args.id)&&("ArrowRight"===e.key?n.next():"ArrowLeft"===e.key?n.previous():"Escape"===e.key&&n.close())}),!1),e.disableResizeListener||(e.resizeDebounceMilliseconds?window.addEventListener("resize",r(n.onResize,e.resizeDebounceMilliseconds)):window.addEventListener("resize",n.onResize)),n.isInited=!0)},onClickThumbnail:e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(n.args.minScreenWidth&&window.innerWidth<=n.args.minScreenWidth)return;let t=e.target;for(;!t.getAttribute("data-robroy-href")&&!t.getAttribute("href");)t=t.parentNode;n.open(t),e.preventDefault()},onClickImage:e=>{const t=e.target.width,r=t*n.args.imageClickListenerThreshold;e.offsetX<=r?n.previous():e.offsetX>=t-r&&n.next()},onResize:()=>{const e=document.getElementById(n.args.id);if(!e)return;const t=e.querySelector(".robroy__img"),r=e.querySelector(".robroy__caption");n.setSize(t,r)},getAnimationDuration:e=>{let t=getComputedStyle(e).animationDuration;return t.includes("ms")?t=parseFloat(t.replace("ms","")):t.includes("s")&&(t=1e3*parseFloat(t.replace("s",""))),t},open:e=>{if(document.getElementById(n.args.id))return;n.activeElement=e,n.args.bodyClass&&document.body.classList.add(n.args.bodyClass);const t=document.createElement("dialog");t.setAttribute("class",`robroy ${n.args.animateInClass}`.trim()),t.setAttribute("id",n.args.id),document.body.appendChild(t);const r=document.createElement("figure");if(r.setAttribute("class","robroy__figure robroy__figure--loading"),t.appendChild(r),!n.args.hideFullScreenButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--full-screen"),e.setAttribute("title",n.lang.fullScreen),e.setAttribute("type","button"),e.addEventListener("click",n.fullScreen),e.innerText=n.lang.fullScreen,r.appendChild(e)}if(!n.args.hideCloseButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--close"),e.setAttribute("title",n.lang.closeImage),e.setAttribute("type","button"),e.addEventListener("click",n.close),e.innerText=n.lang.closeImage,r.appendChild(e)}if(!n.args.hideNavButtons){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--nav robroy__button--prev"),e.setAttribute("title",n.lang.previousImage),e.setAttribute("type","button"),e.addEventListener("click",n.previous),e.innerText=n.lang.previousImage,r.appendChild(e);const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--nav robroy__button--next"),t.setAttribute("title",n.lang.nextImage),t.setAttribute("type","button"),t.innerText=n.lang.nextImage,t.addEventListener("click",n.next),r.appendChild(t)}const i=document.createElement("img");if(i.setAttribute("class","robroy__img"),n.args.disableImageClickListener||i.addEventListener("click",n.onClickImage),r.appendChild(i),!n.args.hideCaption){const e=document.createElement("figcaption");e.setAttribute("class","robroy__caption"),r.appendChild(e)}if(n.args.showNumber){const e=document.createElement("span");e.setAttribute("class","robroy__number"),t.appendChild(e)}if(!n.args.hideOverlay){const e=document.createElement("div");e.setAttribute("class","overlay robroy__overlay"),n.args.disableOverlayClickListener||e.addEventListener("click",n.close),t.appendChild(e)}if(n.setImage(e),t.showModal(),t.focus(),n.args.animateInClass){const e=n.getAnimationDuration(t);setTimeout((()=>{t.classList.remove(n.args.animateInClass)}),e+100)}},close:()=>{n.args.bodyClass&&document.body.classList.remove("robroy-open");const e=document.getElementById(n.args.id);if(n.args.animateOutClass){e.classList.add(n.args.animateOutClass);const t=n.getAnimationDuration(e);setTimeout((()=>{n.onClose(e)}),t+100)}else n.onClose(e)},onClose:e=>{e.remove(),n.activeElement.focus(),n.activeElement=null},next:()=>{let e=n.currentIndex+1;if(n.currentIndex>=n.numImages-1){if(!n.args.enableLoop)return;e=0}const t=document.querySelector(`[data-robroy-index="${e}"]`);n.setImage(t)},previous:()=>{let e=n.currentIndex-1;if(n.currentIndex<=0){if(!n.args.enableLoop)return;e=n.numImages-1}const t=document.querySelector(`[data-robroy-index="${e}"]`);n.setImage(t)},fullScreen:()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},getCaption:e=>{if(e.getAttribute("data-robroy-caption"))return e.getAttribute("data-robroy-caption");let t=e.querySelector("figcaption");if(t)return t.innerHTML;if(t=e.parentNode.querySelector("figcaption"),t)return t.innerHTML;if(!n.args.disableAltCaptions){const t=e.querySelector("img");if(t)return t.getAttribute("alt")}return""},setImage:e=>{const t=document.getElementById(n.args.id);if(t.classList.add("robroy--loading"),n.currentIndex=parseInt(e.getAttribute("data-robroy-index"),10),!n.args.hideNavButtons&&!n.args.enableLoop){const e=t.querySelector(".robroy__button--prev"),r=t.querySelector(".robroy__button--next");n.currentIndex<=0?e.style.display="none":e.style.display="",n.currentIndex>=n.numImages-1?r.style.display="none":r.style.display=""}if(n.args.showNumber){const r=t.querySelector(".robroy__number"),i=parseInt(e.getAttribute("data-robroy-index"),10)+1;r.innerText=n.lang.xOfY.replace("[current]",i).replace("[total]",n.numImages)}const r=t.querySelector(".robroy__img");let i=e.getAttribute("data-robroy-href");i||(i=e.getAttribute("href")),r.setAttribute("src",i);const o=e.getAttribute("data-robroy-height"),s=e.getAttribute("data-robroy-width");if(o&&s){const e=n.getSize(o,s);r.setAttribute("height",e.height),r.setAttribute("width",e.width)}const a=t.querySelector(".robroy__caption"),l=n.getCaption(e);l?(a.style.display="",a.innerHTML=l):(a.style.display="none",a.innerText="");const d=t.querySelector(".robroy__figure");if(r.complete)n.setSize(r,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading");else{let e=setInterval((()=>{r.complete&&(clearInterval(e),e=null,n.setSize(r,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading"))}),n.args.imgLoadIntervalMilliseconds)}},getSize:(e,t)=>{const r=n.getMargin(),i=window.innerHeight-r,o=window.innerWidth-r,s=t/e,a=e/t;return e>i&&(t=(e=i)*s),t>o&&(e=(t=o)*a),{height:e,width:t}},setSize:(e,t)=>{e.setAttribute("height",""),e.setAttribute("width",""),t.style.width="",t.style.height="";const r=n.getSize(e.clientHeight,e.clientWidth);if(e.setAttribute("height",r.height),e.setAttribute("width",r.width),t.style.width=`${r.width}px`,t.innerHTML){let i=t.offsetTop+t.clientHeight,{height:o,width:s}=r;const a=s/o,l=n.getMargin(),d=window.innerHeight-l,u=d/2;for(;i>d&&o>u;)o-=1,s=o*a,e.setAttribute("height",o),e.setAttribute("width",s),t.style.width=`${s}px`,i=t.offsetTop+t.clientHeight;t.style.height=i>d?`${u}px`:""}},getMargin:()=>Math.round(.1*window.innerHeight)};window.robroy=e=>{n.init(e)}})(),Robroy=t})();