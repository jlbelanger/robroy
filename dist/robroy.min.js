var Robroy;(()=>{"use strict";var e=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};(()=>{e(t);const n=(e,t,n)=>{let i;return function(...r){const o=this,s=n&&!i;clearTimeout(i),i=setTimeout((()=>{i=null,n||e.apply(o,r)}),t),s&&e.apply(o,r)}},i={activeElement:null,args:null,lang:null,currentIndex:null,isInited:!1,numImages:0,init:e=>{(e=e||{}).selector=e.disableKeyPressListener||"[data-robroy]",e.bodyClass=e.bodyClass||"robroy-open",e.id=e.id||"robroy",e.disableKeyPressListener=e.disableKeyPressListener||!1,e.disableResizeListener=e.disableResizeListener||!1,e.resizeDebounceMilliseconds=e.resizeDebounceMilliseconds||100,e.minScreenWidth=e.minScreenWidth||400,e.disableImageClickListener=e.disableImageClickListener||!1,e.imageClickListenerThreshold=e.imageClickListenerThreshold||.5,e.disableOverlayClickListener=e.disableOverlayClickListener||!1,e.hideCloseButton=e.hideCloseButton||!1,e.hideFullScreenButton=e.hideFullScreenButton||!1,e.hideNavButtons=e.hideNavButtons||!1,e.hideCaption=e.hideCaption||!1,e.hideOverlay=e.hideOverlay||!1,e.disableAltCaptions=e.disableAltCaptions||!1,e.imgLoadIntervalMilliseconds=e.imgLoadIntervalMilliseconds||250,e.animateInClass=e.animateInClass||"robroy-fade-in",e.animateOutClass=e.animateOutClass||"robroy-fade-out",i.args=e;const t=e.lang||{};t.closeImage=t.closeImage||"Close Image",t.fullScreen=t.fullScreen||"Full Screen",t.previousImage=t.previousImage||"Previous Image",t.nextImage=t.nextImage||"Next Image",i.lang=t;const r=document.querySelectorAll(e.selector),o=r.length;let s;for(s=0;s<o;s+=1)r[s].addEventListener("click",i.onClickThumbnail),r[s].setAttribute("data-robroy-index",s),i.numImages+=1;i.isInited||i.numImages<=0||(e.disableKeyPressListener||document.addEventListener("keydown",(e=>{document.getElementById(i.args.id)&&("ArrowRight"===e.key?i.next():"ArrowLeft"===e.key?i.previous():"Escape"===e.key&&i.close())}),!1),e.disableResizeListener||(e.resizeDebounceMilliseconds?window.addEventListener("resize",n(i.onResize,e.resizeDebounceMilliseconds)):window.addEventListener("resize",i.onResize)),i.isInited=!0)},onClickThumbnail:e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(i.args.minScreenWidth&&window.innerWidth<=i.args.minScreenWidth)return;let t=e.target;for(;!t.getAttribute("data-robroy-href")&&!t.getAttribute("href");)t=t.parentNode;i.open(t),e.preventDefault()},onClickImage:e=>{const t=e.target.width,n=t*i.args.imageClickListenerThreshold;e.offsetX<=n?i.previous():e.offsetX>=t-n&&i.next()},onResize:()=>{const e=document.getElementById(i.args.id);if(!e)return;const t=e.querySelector(".robroy__img"),n=e.querySelector(".robroy__caption");i.setSize(t,n)},getAnimationDuration:e=>{let t=getComputedStyle(e).animationDuration;return t.includes("ms")?t=parseFloat(t.replace("ms","")):t.includes("s")&&(t=1e3*parseFloat(t.replace("s",""))),t},open:e=>{if(document.getElementById(i.args.id))return;i.activeElement=e,i.args.bodyClass&&document.body.classList.add(i.args.bodyClass);const t=document.createElement("dialog");t.setAttribute("class",`robroy ${i.args.animateInClass}`.trim()),t.setAttribute("id",i.args.id),document.body.appendChild(t);const n=document.createElement("figure");if(n.setAttribute("class","robroy__figure robroy__figure--loading"),t.appendChild(n),!i.args.hideCloseButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--close"),e.setAttribute("title",i.lang.closeImage),e.setAttribute("type","button"),e.addEventListener("click",i.close),e.innerText=i.lang.closeImage,n.appendChild(e)}if(!i.args.hideFullScreenButton){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--full-screen"),e.setAttribute("title",i.lang.fullScreen),e.setAttribute("type","button"),e.addEventListener("click",i.fullScreen),e.innerText=i.lang.fullScreen,n.appendChild(e)}if(!i.args.hideNavButtons){const e=document.createElement("button");e.setAttribute("class","robroy__button robroy__button--nav robroy__button--prev"),e.setAttribute("title",i.lang.previousImage),e.setAttribute("type","button"),e.addEventListener("click",i.previous),e.innerText=i.lang.previousImage,n.appendChild(e);const t=document.createElement("button");t.setAttribute("class","robroy__button robroy__button--nav robroy__button--next"),t.setAttribute("title",i.lang.nextImage),t.setAttribute("type","button"),t.innerText=i.lang.nextImage,t.addEventListener("click",i.next),n.appendChild(t)}const r=document.createElement("img");if(r.setAttribute("class","robroy__img"),i.args.disableImageClickListener||r.addEventListener("click",i.onClickImage),n.appendChild(r),!i.args.hideCaption){const e=document.createElement("figcaption");e.setAttribute("class","robroy__caption"),n.appendChild(e)}if(!i.args.hideOverlay){const e=document.createElement("div");e.setAttribute("class","overlay robroy__overlay"),i.args.disableOverlayClickListener||e.addEventListener("click",i.close),t.appendChild(e)}if(i.setImage(e),t.showModal(),t.focus(),i.args.animateInClass){const e=i.getAnimationDuration(t);setTimeout((()=>{t.classList.remove(i.args.animateInClass)}),e+100)}},close:()=>{i.args.bodyClass&&document.body.classList.remove("robroy-open");const e=document.getElementById(i.args.id);if(i.args.animateOutClass){e.classList.add(i.args.animateOutClass);const t=i.getAnimationDuration(e);setTimeout((()=>{i.onClose(e)}),t+100)}else i.onClose(e)},onClose:e=>{e.remove(),i.activeElement.focus(),i.activeElement=null},next:()=>{if(i.currentIndex>=i.numImages-1)return;const e=document.querySelector(`[data-robroy-index="${i.currentIndex+1}"]`);i.setImage(e)},previous:()=>{if(i.currentIndex<=0)return;const e=document.querySelector(`[data-robroy-index="${i.currentIndex-1}"]`);i.setImage(e)},fullScreen:()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()},getCaption:e=>{if(e.getAttribute("data-robroy-caption"))return e.getAttribute("data-robroy-caption");let t=e.querySelector("figcaption");if(t)return t.innerHTML;if(t=e.parentNode.querySelector("figcaption"),t)return t.innerHTML;if(!i.args.disableAltCaptions){const t=e.querySelector("img");if(t)return t.getAttribute("alt")}return""},setImage:e=>{const t=document.getElementById(i.args.id);if(t.classList.add("robroy--loading"),i.currentIndex=parseInt(e.getAttribute("data-robroy-index"),10),!i.args.hideNavButtons){const e=t.querySelector(".robroy__button--prev"),n=t.querySelector(".robroy__button--next");i.currentIndex<=0?e.style.display="none":e.style.display="",i.currentIndex>=i.numImages-1?n.style.display="none":n.style.display=""}const n=t.querySelector(".robroy__img");let r=e.getAttribute("data-robroy-href");r||(r=e.getAttribute("href")),n.setAttribute("src",r);const o=e.getAttribute("data-robroy-height"),s=e.getAttribute("data-robroy-width");if(o&&s){const e=i.getSize(o,s);n.setAttribute("height",e.height),n.setAttribute("width",e.width)}const a=t.querySelector(".robroy__caption"),l=i.getCaption(e);l?(a.style.display="",a.innerHTML=l):(a.style.display="none",a.innerText="");const d=t.querySelector(".robroy__figure");if(n.complete)i.setSize(n,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading");else{let e=setInterval((()=>{n.complete&&(clearInterval(e),e=null,i.setSize(n,a),t.classList.remove("robroy--loading"),d.classList.remove("robroy__figure--loading"))}),i.args.imgLoadIntervalMilliseconds)}},getSize:(e,t)=>{const n=i.getMargin(),r=window.innerHeight-n,o=window.innerWidth-n,s=t/e,a=e/t;return e>r&&(t=(e=r)*s),t>o&&(e=(t=o)*a),{height:e,width:t}},setSize:(e,t)=>{e.setAttribute("height",""),e.setAttribute("width",""),t.style.width="",t.style.height="";const n=i.getSize(e.clientHeight,e.clientWidth);if(e.setAttribute("height",n.height),e.setAttribute("width",n.width),t.style.width=`${n.width}px`,t.innerHTML){let r=t.offsetTop+t.clientHeight,{height:o,width:s}=n;const a=s/o,l=i.getMargin(),d=window.innerHeight-l,c=d/2;for(;r>d&&o>c;)o-=1,s=o*a,e.setAttribute("height",o),e.setAttribute("width",s),t.style.width=`${s}px`,r=t.offsetTop+t.clientHeight;t.style.height=r>d?`${c}px`:""}},getMargin:()=>Math.round(.1*window.innerHeight)};window.robroy=e=>{i.init(e)}})(),Robroy=t})();